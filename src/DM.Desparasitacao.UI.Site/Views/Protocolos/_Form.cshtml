@model DM.Desparasitacao.Application.ViewModels.ProtocoloLuaTratamentoViewModel

@using (Ajax.BeginForm(Model == null ? "Create" : "Edit", new AjaxOptions { UpdateTargetId = "div-protocolo-lua-form" }))
{
    @Html.AntiForgeryToken()

    <div class="row">
        <div class="form-horizontal col-md-12">
            <div class="col-md-12">
                <div class="row">
                    @if (Model == null)
                    {
                        <h3>Cadastrar Protocolo da Lua</h3>
                    }
                    else
                    {
                        <h3>Alterar Protocolo da Lua</h3>
                    }
                </div>

                @Html.Partial("_ErrorSummary")

                <div class="row">

                    <div class="row">
                        <div class="col-md-6">
                            @Html.LabelFor(model => model.ProtocoloLua.Lua, new { @class = "control-label, col-md-12" })
                            <div class="col-md-12">
                                @Html.EnumDropDownListFor(model => model.ProtocoloLua.Lua, "Selecione...", new { @class = "form-control", data_ajaxupdate_url_input_text = Url.Action("AtualizarFiltrosAsync"), data_ajaxupdate_targetid = "#div-protocolo-lua-form" })
                                @Html.ValidationMessageFor(model => model.ProtocoloLua.Lua, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>

                    @if (Model != null && Model.ProtocoloLua.Numero != 0)
                    {
                        <div class="row">
                            <div class="col-md-3">
                                @Html.LabelFor(model => model.ProtocoloLua.QuantidadeDia, new { @class = "control-label, col-md-12" })
                                <div class="col-md-12">
                                    @Html.EditorFor(model => model.ProtocoloLua.QuantidadeDia, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.ProtocoloLua.QuantidadeDia, "", new { @class = "text-danger" })
                                </div>
                            </div>
                            <div class="col-md-3">
                                @Html.LabelFor(model => model.ProtocoloLua.DiasDeAntecipacao, new { @class = "control-label, col-md-12" })
                                <div class="col-md-12">
                                    @Html.EditorFor(model => model.ProtocoloLua.DiasDeAntecipacao, new { htmlAttributes = new { @class = "form-control" } })
                                    @Html.ValidationMessageFor(model => model.ProtocoloLua.DiasDeAntecipacao, "", new { @class = "text-danger" })
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="row text-center">
                                <div class="col-md-12">
                                    <h3>Dia</h3>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-3">
                                            @Html.LabelFor(model => model.DiaDoProtocolo.DiaProtocolo.Enema, new { @class = "control-label col-md-12" })
                                            <div class="col-md-12">
                                                <div class="col-md-6">
                                                    @Html.RadioButtonFor(model => model.DiaDoProtocolo.DiaProtocolo.Enema, "true", new { @class = "col-md-2" })
                                                    @Html.Label("Sim", new { @class = "col-md-2" })
                                                </div>
                                                <div class="col-md-6">
                                                    @Html.RadioButtonFor(model => model.DiaDoProtocolo.DiaProtocolo.Enema, "false", new { @class = "col-md-2" })
                                                    @Html.Label("Não", new { @class = "col-md-2" })
                                                </div>
                                                @Html.ValidationMessageFor(model => model.DiaDoProtocolo.DiaProtocolo.Enema, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">

                                        <div class="col-md-12">
                                            <div class="row text-center">
                                                <div class="col-md-12">
                                                    <h3>Procedimento</h3>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            @Html.LabelFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.AdministracaoRemedio.Horario, new { @class = "control-label col-md-12" })
                                                            <div class="col-md-12">
                                                                <div class="col-md-4">
                                                                    @Html.RadioButtonFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.AdministracaoRemedio.Horario, "1", new { @class = "col-md-2" })
                                                                    @Html.Label("Almoço", new { @class = "col-md-2" })
                                                                </div>
                                                                <div class="col-md-4">
                                                                    @Html.RadioButtonFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.AdministracaoRemedio.Horario, "2", new { @class = "col-md-2" })
                                                                    @Html.Label("Janta", new { @class = "col-md-2" })
                                                                </div>
                                                                <div class="col-md-4">
                                                                    @Html.RadioButtonFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.AdministracaoRemedio.Horario, "3", new { @class = "col-md-2" })
                                                                    @Html.Label("Ao longo do dia", new { @class = "col-md-2" })
                                                                </div>
                                                                @Html.ValidationMessageFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.AdministracaoRemedio.Horario, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            @Html.LabelFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.Remedio.Nome, new { @class = "control-label col-md-12" })
                                                            <div class="col-md-12">                                                                
                                                                @Html.DropDownListFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.Remedio.Nome, Model.RemediosSelectList, Model.RemediosSelectList.Any() ? "Selecione" : "-", new { @class = "form-control" })
                                                                @Html.ValidationMessageFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.AdministracaoRemedio.Horario, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                        <div class="col-md-6">
                                                            @Html.LabelFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.AdministracaoRemedio.Dose, new { @class = "control-label col-md-12" })
                                                            <div class="col-md-12">
                                                                @Html.EditorFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.AdministracaoRemedio.Dose, new { @class = "form-control" })
                                                                @Html.ValidationMessageFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.AdministracaoRemedio.Dose, "", new { @class = "text-danger" })
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12 pull-right">
                                                    @if (Model.DiaDoProtocolo.RemedioParaAdministrar.AdministracaoRemedio.Id == Guid.Empty)
                                                    {
                                                        <button type="submit" name="command:IncluirAdministracao" class="btn btn-default cancel alignright margin-top-10" aria-label="Incluir">
                                                            Incluir Procedimento
                                                        </button>
                                                    }
                                                    else
                                                    {
                                                        <button type="submit" name="command:SalvarAdministracao" class="btn btn-default cancel alignright margin-top-10" aria-label="Incluir">
                                                            Salvar Procedimento
                                                        </button>
                                                    }
                                                </div>
                                            </div>
                                            @if (Model != null && Model.DiaDoProtocolo.RemediosParaAdministrar != null && Model.DiaDoProtocolo.RemediosParaAdministrar.Count > 0)
                                            {
                                                <div class="row">
                                                    <div class="row text-center">
                                                        <div class="col-md-12">
                                                            <h3>Lista de Procedimentos:</h3>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-xs-12">
                                                            <table class="table table-striped table-bordered">
                                                                <thead>
                                                                    <tr>
                                                                        <th>
                                                                            @Html.DisplayNameFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.AdministracaoRemedio.Horario)
                                                                        </th>
                                                                        <th>
                                                                            @Html.DisplayNameFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.Remedio.Nome)
                                                                        </th>
                                                                        <th>
                                                                            @Html.DisplayNameFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.AdministracaoRemedio.Dose)
                                                                        </th>
                                                                        <th>
                                                                            @Html.DisplayNameFor(model => model.DiaDoProtocolo.RemedioParaAdministrar.Remedio.Unidade)
                                                                        </th>
                                                                        <th></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    @foreach (var item in Model.DiaDoProtocolo.RemediosParaAdministrar)
                                                                    {
                                                                        <tr>
                                                                            <td>
                                                                                @Html.DisplayFor(modelItem => item.AdministracaoRemedio.HorarioDescricao)
                                                                            </td>
                                                                            <td>
                                                                                @Html.DisplayFor(modelItem => item.Remedio.Nome)
                                                                            </td>
                                                                            <td>
                                                                                @Html.DisplayFor(modelItem => item.AdministracaoRemedio.Dose)
                                                                            </td>
                                                                            <td>
                                                                                @Html.DisplayFor(modelItem => item.Remedio.UnidadeDescricao)
                                                                            </td>
                                                                            <td>
                                                                                <button type="submit" name="command:EditarProcedimento;index:@item.AdministracaoRemedio.Id" class="btn btn-xs glyphicon glyphicon-edit cancel" data-toggle="tooltip" data-placement="top" title="Editar" aria-label="Editar" />
                                                                                <button id="excluir" type="submit" name="command:ExcluirProcedimento;index:@item.AdministracaoRemedio.Id" class="btn btn-xs glyphicon glyphicon-trash cancel" data-toggle="tooltip" data-placement="top" title="Remover" aria-label="Remover"></button>
                                                                            </td>
                                                                        </tr>
                                                                    }
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-xs-12 pull-right">
                                            @if (Model.DiaDoProtocolo.DiaProtocolo.Id == Guid.Empty)
                                            {
                                                <button type="submit" name="command:IncluirDia" class="btn btn-default cancel alignright margin-top-10" aria-label="Incluir">
                                                    Incluir Dia
                                                </button>
                                            }
                                            else
                                            {
                                                <button type="submit" name="command:SalvarDia" class="btn btn-default cancel alignright margin-top-10" aria-label="Incluir">
                                                    Salvar Dia
                                                </button>
                                            }
                                        </div>
                                    </div>
                                    @if (Model != null && Model.DiasDoProtocolo != null && Model.DiasDoProtocolo.Count > 0)
                                    {
                                        <div class="row">
                                            <div class="row text-center">
                                                <div class="col-md-12">
                                                    <h3>Lista de Dias:</h3>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <table class="table table-striped table-bordered">
                                                        <thead>
                                                            <tr>
                                                                <th>
                                                                    @Html.DisplayNameFor(model => model.DiaDoProtocolo.DiaProtocolo.Dia)
                                                                </th>
                                                                <th>
                                                                    @Html.DisplayNameFor(model => model.DiaDoProtocolo.DiaProtocolo.Enema)
                                                                </th>
                                                                <th></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            @foreach (var item in Model.DiasDoProtocolo)
                                                            {
                                                                <tr>
                                                                    <td>
                                                                        @Html.DisplayFor(modelItem => item.DiaProtocolo.Dia)
                                                                    </td>
                                                                    <td>
                                                                        @Html.DisplayFor(modelItem => item.DiaProtocolo.Enema)
                                                                    </td>
                                                                    <td>
                                                                        <button type="submit" name="command:EditarDia;index:@item.DiaProtocolo.Id" class="btn btn-xs glyphicon glyphicon-edit cancel" data-toggle="tooltip" data-placement="top" title="Editar" aria-label="Editar" />
                                                                        <button id="excluir" type="submit" name="command:ExcluirDia;index:@item.DiaProtocolo.Id" class="btn btn-xs glyphicon glyphicon-trash cancel" data-toggle="tooltip" data-placement="top" title="Remover" aria-label="Remover"></button>
                                                                    </td>
                                                                </tr>
                                                            }
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    }
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
}